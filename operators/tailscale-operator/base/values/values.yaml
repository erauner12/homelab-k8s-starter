# Tailscale Kubernetes Operator Helm Values
# https://tailscale.com/kb/1236/kubernetes-operator

# OAuth credentials are provided via pre-created Secret named "operator-oauth"
# with keys: client_id and client_secret
# Leaving oauth block empty uses the default Secret lookup
oauth: {}

# Install CRDs with the chart (recommended)
installCRDs: true

operatorConfig:
  # Starter default is untagged to avoid ACL coupling.
  # Set your own tag(s) once your tailnet ACL/tagOwners are configured.
  defaultTags: []

  # Operator container configuration
  logging: "info"
  hostname: "tailscale-operator"

  # Schedule on Linux nodes only
  nodeSelector:
    kubernetes.io/os: linux

  # Resource limits for the operator
  resources:
    requests:
      cpu: 10m
      memory: 64Mi
    limits:
      memory: 256Mi

# Proxy configuration for services exposed via Tailscale
proxyConfig:
  # Starter default is untagged to avoid ACL coupling.
  # Set an explicit tag after configuring tagOwners in Tailscale ACL.
  defaultTags: ""

  # Firewall mode: auto selects best mode based on environment
  # - "auto": automatically detect (recommended)
  # - "nftables": use nftables
  # - "iptables": use iptables
  firewallMode: auto

# Ingress class for Tailscale Ingress resources
ingressClass:
  name: "tailscale"
  enabled: true

# API server proxy is disabled by default (security best practice)
# Enable only if you need remote kubectl access via Tailscale
apiServerProxyConfig:
  mode: "false"
  allowImpersonation: "false"
