version: '3'

tasks:
  preflight:
    desc: Run local preflight checks
    cmds:
      - ./scripts/pre-bootstrap-test.sh

  static:validate:
    desc: Render and schema-validate key targets (auto full/fast)
    cmds:
      - ./scripts/static-validate.sh

  static:validate:fast:
    desc: Render and schema-validate non-helm targets
    cmds:
      - ./scripts/static-validate-fast.sh

  static:validate:full:
    desc: Render and schema-validate all targets (requires Helm 3)
    cmds:
      - ./scripts/static-validate-full.sh

  bootstrap:plan:
    desc: Show bootstrap plan
    cmds:
      - ./bin/homelabctl bootstrap plan

  bootstrap:run:
    desc: Run bootstrap
    cmds:
      - ./bin/homelabctl bootstrap run --kubeconfig ~/.kube/config

  kind:up:
    desc: Create local kind cluster and deploy starter profile
    cmds:
      - ./scripts/kind-up.sh

  kind:status:
    desc: Show status of local kind deployment
    cmds:
      - ./scripts/kind-status.sh

  kind:validate:
    desc: Validate ArgoCD sync and workload readiness on local kind profile
    cmds:
      - ./scripts/kind-validate.sh

  kind:down:
    desc: Delete local kind cluster
    cmds:
      - ./scripts/kind-down.sh
