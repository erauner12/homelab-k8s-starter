apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Kubernetes Operators - CRD-installing controllers
# These deploy before infrastructure configuration (sync-wave -50 to -40)

resources:
  # Core operators (sync-wave -50 to -48)
  - cert-manager-app.yaml
  - external-secrets-app.yaml
  - kyverno-app.yaml

  # Database/Storage operators (sync-wave -46 to -44)
  - cloudnative-pg-app.yaml
  - dragonfly-operator-app.yaml
  - democratic-csi-app.yaml

  # Backup operators (sync-wave -60)
  - volsync-app.yaml

  # Observability operators (sync-wave -44)
  - opentelemetry-operator-app.yaml
  - truenas-exporter-app.yaml

  # Specialized operators (sync-wave -48 to -45)
  - toolhive-operator-app.yaml
  - rocm-gpu-operator-app.yaml
  - homelab-operator-app.yaml
  - tailscale-operator-app.yaml

  # Scheduling operators (sync-wave -50)
  - descheduler-app.yaml

  # Argo ecosystem (sync-wave -10)
  - argo-events-app.yaml
  - argo-workflows-app.yaml

  # Task automation (sync-wave -40, after argo-workflows)
  - homelab-tasks-app.yaml

components:
  - ../../kustomize/components/argocd-app-ignore-common
