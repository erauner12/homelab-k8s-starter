apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Security-layer NetworkPolicies
# Network segmentation for security infrastructure namespaces

resources:
  # Auth namespace policies
  - auth/dex-egress-omni.yaml
  # External Secrets namespace policies
  # TODO: Fix external-secrets-operator policy - currently blocks K8s API access
  # - external-secrets/external-secrets-operator.yaml
  # Security namespace policies
  # TODO: Fix onepassword-connect policy - currently blocks 1Password API access
  # - security/onepassword-connect.yaml

labels:
  - pairs:
      homelab.dev/managed-by: argocd
      homelab.dev/security-layer: "true"
    includeSelectors: false
